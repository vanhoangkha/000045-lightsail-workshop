[
{
	"uri": "/5-rdsdb/5.1-enable-vpcpeering/",
	"title": "Activate VPC Peering",
	"tags": [],
	"description": "",
	"content": "Activate VPC Peering In this step, we will enable VPC Peering feature to create connection from Lightsail network to AWS Default VPC Lightsail network is only capable of peering with AWS Default VPC.\n Return to the [Lightsail console] interface (https://lightsail.aws.amazon.com/ls/webapp/home/). Click on Account in the upper right corner menu.  Click on Account, then click on Advance tab.  Click Enable VPC Peering.  The next step is to configure the Amazon Relational Database Service side firewall to accept incoming connections from the Lightsail instance.\n"
},
{
	"uri": "/",
	"title": "Amazon Lightsail Workshop",
	"tags": [],
	"description": "",
	"content": "Amazon Lightsail Workshop - Cost Optimization on AWS Overview Amazon Lightsail is the easiest way to get started with AWS. Lightsail offers compute, storage, and networking services at low, flat rates. Not stopping there, your Lightsail instances can take advantage of the rest of the services that AWS has to offer.\nDeploy and scale LAMP stack applications on Amazon Lightsail\nIn these labs, you will deploy a scalable and fault-tolerant LAMP stack application. To start we will use the PHP front-end in a single Lightsail instance based on the Bitnami LAMP blueprint. Next, you\u0026rsquo;ll implement the highly available Lightsail-managed database and redirect the web UI to use it. You will then use Lightsail\u0026rsquo;s snapshot feature to scale out your PHP web application and put your servers behind the load balancer.\nContent  Preparation App Test  Using Lightsail Database  Using Lightsail LB Using RDS Teleport to EC2 Resource Cleanup  "
},
{
	"uri": "/1-deploy-lab-infra/1.1-lightsail-instance/",
	"title": "Create Lightsail instance",
	"tags": [],
	"description": "",
	"content": "As a first step, we will deploy a sample application based on the LAMP stack and place the application in a Lightsail instance. The Lightsail instance plays the same role as a virtual server in a traditional environment. The resources in the lab should be created in the same Region, here we will use Region Singapore.\n From Lightsail\u0026rsquo;s admin interface   Select Let\u0026rsquo;s get started  Click Create Instance.  Click the Linux/Unix platform. Under Blueprint, click LAMP (PHP7).  Drag the screen down, and click +Add Launch Script.  Copy and paste the code below into the Enter your setup code here. box. These commands will be run for the first time when the Lightsail instance is launched.  cd /opt/bitnami/apache2/htdocs\rsudo rm -rf *\rsleep 120\rsudo git clone -b loft https://github.com/mikegcoleman/todo-php .\rsudo echo \u0026#34;setting ownership on settings file\u0026#34;\rsudo chown bitnami:daemon connectvalues.php\rsudo chmod 666 connectvalues.php\rsudo echo \u0026#34;adding db password to settings file\u0026#34;\rsudo sed -i.bak \u0026#34;s/\u0026lt;password\u0026gt;/$(cat /home/bitnami/bitnami_application_password)/;\u0026#34; /opt/bitnami/apache2/htdocs/connectvalues.php\rsudo echo \u0026#34;creating tasks database\u0026#34;\rsudo cat /home/bitnami/htdocs/data/init.sql | /opt/bitnami/mysql/bin/mysql -u root -p$(cat /home/bitnami/bitnami_application_password) The above code does the following: . Bitnami will have the site installed by default which we will need to remove. The script starts by passing the path to /opt/bitnami/apache2/htdocs and removing the default web page. . Next, the script proceeds to copy the application source code from the Github repo. . To ensure that the PHP application can write changes to the configuration file (connectvalues.php), the script changes the ownership (chown) on the file to match the account running Apache. web server, and also do (chmod) to make sure that account can write to the file. . Each Bitnami instance will generate a unique password for the pre-installed MySQL database, the next command in the scripts will open the configuration file and update it with this generated password.(Password) will be located at /home/bitnami/bitnami_application_password )\n. Finally, the script executes a set of SQL statements through the MySQL commandline tool to initialize the local database.\n\rScroll down, under Identify your instance, name our instance PHP-FE-1.  Drag the screen down, click Create Instance.  Wait a few minutes for the Lightsail instance to switch to the running state as shown below.  Congratulations on creating your first Lightsail instance.  "
},
{
	"uri": "/4-lightsaillb/4.1-lightsailsnapshot/",
	"title": "Create Lightsail snapshot",
	"tags": [],
	"description": "",
	"content": "Create Lightsail snapshot Lightsail makes it super simple to create your snapshot instances with just one click. These snapshots can be used to backup and restore instances, increase or decrease instance size, or create new instances.\n Return to the [Lightsail console] interface (https://lightsail.aws.amazon.com/ls/webapp/home/). Click on the name of our Lightsail instance.  Click the Snapshot tab, then click Create snapshot.  Click Create to proceed with creating snapshot.  The status will change to snapshotting, the snapshot creation time is more than 5 minutes, and you need to wait for the snapshot to complete before proceeding to the next step.\n\r"
},
{
	"uri": "/6-migrate-ec2/6.1-lightsail-snapshot/",
	"title": "Export Lightsail snapshot",
	"tags": [],
	"description": "",
	"content": "Create Lightsail snapshot and export to EC2.   Return to the [Lightsail console] interface (https://lightsail.aws.amazon.com/ls/webapp/home/). Click on the name of our Lightsail instance PHP-FE-1.\n  Click the Snapshot tab, then click Create snapshot.\n  Name the snapshot ec2-export.  Click Create to proceed with creating snapshot.  Once the snapshot is created, we will click on the 3-dot icon and click Export to EC2.  Click Yes, continue.  Click Acknowledged to start the export process. It will take about 15 minutes to export from Lightsail snapshot to EC2.  Once the export is complete, click Open in the Amazon EC2 console. Next we will proceed to create an EC2 instance from the exported snapshot.  "
},
{
	"uri": "/1-deploy-lab-infra/",
	"title": "Preparation",
	"tags": [],
	"description": "",
	"content": "Prepare In this lab, you will implement the infrastructure components that will be used in the following sections.\nSpecifically, you will implement:\n Create Lightsail instance Lightsail-based database One Lightsail Load Balancer RDS Database Deployment  "
},
{
	"uri": "/2-access-app/",
	"title": "App Access",
	"tags": [],
	"description": "",
	"content": "Access the application In this step, we will access the application we installed in the Lightsail instance.\nOur current architecture is very simple, we will connect directly to the Lightsail instance over the internet.\nOn the application side, our Front end PHP and MySQL database are currently installed on a single Lightsail instance.\n Return to the [Lightsail console] interface (https://lightsail.aws.amazon.com/ls/webapp/home/). We will see the public IP address of the Lightsail instance.  Proceed to connect to the public IP address, we will access the todo application as shown below.  "
},
{
	"uri": "/6-migrate-ec2/6.2-ec2-instance/",
	"title": "Create EC2 Instance",
	"tags": [],
	"description": "",
	"content": "Create EC2 Instance from exported snapshot  After clicking Open in the Amazon EC2 console, we will be redirected to the AMI (Amazon Machine Image) management interface. The AMI is the template for creating EC2 instances.   Click Launch to proceed to create EC2 instance.   Click Next: Configure Instance Details.  Make sure the selected VPC is VPC Default. Click Review and Launch.  Click Launch to proceed to create the instance.   Click Create a new keypair. Name the key pair arbitrarily. Click Download Key Pair. Click Launch Instances.  The key pair is used to encrypt the login information to the EC2 instance. In this lab we do not use this key pair.\n\r Click View Instances, then click on instance id.  Click on Security tab then click on security group.  Please save this security group information to prepare for the step of configuring the security group for RDS.\n\r Click Edit inbound rules.  Click Add rule.   Type section, select HTTP. In the Source section, select Anywhere IPv4. Click Add rule. Type section, select HTTPS. Click Save rules.  Click Instances.   Click on the EC2 instance we just selected. Click Open address or open the public address of the EC2 instance in the browser.  We will get an error like this, because the RDS security group has not allowed our EC2 instance to connect to. In the next step, we will configure the security group of the RDS instance, allowing the EC2 instance we just created to connect.  "
},
{
	"uri": "/1-deploy-lab-infra/1.2-lightsail-db/",
	"title": "Create Lightsail DB Instance",
	"tags": [],
	"description": "",
	"content": "In this step we will create a database (CSDL) / Database (DB) Lightsail. Lightsail Database is an AWS-managed database service that allows us to reduce the complexity of database deployment and management.\nLightsail will manage the underlying infrastructure and also the database engine, we will only need to take care of creating, deploying and setting up the database tables that run in the Lightsail database. The resources in the lab should be created in the same Region, here we will use Region Singapore.\n From Lightsail\u0026rsquo;s admin interface click Databases then click Create Database.  From the MySQL dropdown menu, select version 5.7.xx.  By default, Lightsail will create a complex password for you, but this password will contain complex characters that make copying and pasting difficult. In the framework of this lab we will specify the password.\n\rClick Specify login credentials.  Uncheck Create a strong password for me, then set a password for your Lightsail database and make a note. Here we will set the password as asg123456.  Scroll down, in this lab we will implement a high availability database model. Click High Availability under Choose your database plan.  Drag the screen downwards. Name our database Todo-DB. Then click Create database.  It will take more than 10 minutes for the Lightsail database to switch to the running state as shown below, congratulations on creating your first Lightsail database. You can continue with the next steps while you wait for the Lightsail database to be created.  "
},
{
	"uri": "/4-lightsaillb/4.2-createlightsail/",
	"title": "Create Lightsail instance",
	"tags": [],
	"description": "",
	"content": "Create Lightsail instance from snapshot  Once the snapshot has been created, click on the 3 dots icon.   Click Create new instance to proceed to create Lightsail instance from snapshot.  Click Change zone to change the Availability Zone for the Lightsail instance, we will create 2 new Lightsail instances in 2 different Availability zones from the original Lightsail instance.  Click Zone B.  Scroll to the bottom of the screen, name the Lightsail instance PHP-FE-2 and click Create instance.  "
},
{
	"uri": "/5-rdsdb/5.2-configure-securitygroup/",
	"title": "Security Group Configuration",
	"tags": [],
	"description": "",
	"content": "Configure Amazon Relational Database Service\u0026rsquo;s Security Group. In this step, we will configure the Amazon Relational Database Service side firewall to accept incoming connections from the Lightsail instance.\n Return to the RDS console interface. (We still use Region Singapore throughout in the lab, if you use another Region, you will have to change the Region to suit). Under Resources, click DB Instances.  Click on the name database-1 RDS instance that we created in the preparation step.  Under Connectivity \u0026amp; security, click on default security group.  Click Inbound Rules, then click Edit inbound rules.  Click Add rule to proceed with adding a new rule for the security group.   From the type drop down, select MySQL/Aurora. In the source box, enter 172.26.0.0/16 (this is the Lightsail subnet CIDR). Click Save rules  So we have configured the firewall (security group) of the RDS instance to accept connections from the Lightsail subnet. Next we will configure our application to connect to the Amazon RDS endpoint.\n"
},
{
	"uri": "/4-lightsaillb/4.3-attachlightsail/",
	"title": "Assemble instance to LB",
	"tags": [],
	"description": "",
	"content": "Attach the Lightsail instance to the load balancer In this step, after creating the Lightsail instances, we will attach the Lightsail instances to the Todo-LB load balancer that we created.\n Return to the [Lightsail console] interface (https://lightsail.aws.amazon.com/ls/webapp/home/). Click on the Networking tab then click on the name of the load balancer Todo-LB we created.  In the Target Instances section, click the dropdown menu, type P to bring up the list of Lightsail instances we have created, then select our first instance as PHP-FE -first.  Click Attach to proceed with attaching the instance to the load balancer.  Click Attach another and do the same steps 2.3 to attach the remaining 2 instances.  After attaching 3 Lightsail instances, we will reach the following state.  Drag the screen upwards, right click on the DNS Name of Todo-LB load balancer and click Open link in new tab to access our web application.  Do F5 to refresh the browser a few times, we will see we connect to 2 different Lightsail instances. Congratulations on successfully scaling your web application.  "
},
{
	"uri": "/1-deploy-lab-infra/1.3-lightsail-lb/",
	"title": "Create Lightsail Load Balancer",
	"tags": [],
	"description": "",
	"content": "To be ready for scalability and fault tolerance, we will deploy the Front End of our website after the Lightsail load balancer. Lightsail load balancers can handle both HTTP and HTTPS traffic on ports 80 and 443. For HTTPS you can request a free certificate from the AWS Certificate Manager service. (In the framework of this lab, we will use HTTP.)\nThe resources in the lab should be created in the same Region, here we will use Region Singapore.\n From Lightsail\u0026rsquo;s admin interface click Networking then click Create load balancer.  Drag the screen down. Name our load balancer Todo-LB. Then click Create load balancer.  We have finished creating the Lightsail load balancer, we will use the Lightsail load balancer in the next steps of the lab.  "
},
{
	"uri": "/3-lightsaildb/",
	"title": "Lightsail Database Connection",
	"tags": [],
	"description": "",
	"content": "Connect to Lightsail Database Currently, our web application is not scalable because the database and web application are on the same machine. It will be difficult for us to upgrade the database system to meet the requirements of the application.\nTo improve the current architecture, the application and the database need to be separated. In this step, you will configure the PHP application to point to the previously deployed Lightsail Database.\nOur architecture when connecting more Lightsail database will be as follows:\nOn the application side, Front end PHP is installed on the Lightsail instance and MySQL runs on the Lightsail database.\n Return to the [Lightsail console] interface (https://lightsail.aws.amazon.com/ls/webapp/home/). Click Databases , then click the 3 dots icon.  Click Manage.  At the Todo-DB admin page, copy the endpoint information of the Lightsail database. Example current endpoint information is: ls-689449b809a4e45abdcfb8c46e6c0e67ee990e9d.cqczsvxxcufs.ap-southeast-1.rds.amazonaws.com  Back to our todo app page. Click Settings.  In the DB Hostname section, enter the endpoint information of Todo-DB.   In the DB Username field, enter dbmasteruser. In the DB Password field, enter asg123456. Click Save Settings.  The application will check the connection to the Lightsail database.  Click Add Task and add custom tasks. The next tasks you create will be saved in the Lightsail database.  "
},
{
	"uri": "/5-rdsdb/5.3-update-db/",
	"title": "Update database configuration",
	"tags": [],
	"description": "",
	"content": "Update the application\u0026rsquo;s database configuration. In this step, we will define the endpoint of the Amazon Relational Database Service instance we created, and then configure the application to connect to the RDS instance.\n Return to the RDS console interface. (We still use Region Singapore throughout in the lab, if you use another Region, you will have to change the Region to suit). Under Resources, click DB Instances.  Click on the name database-1 RDS instance that we created in the preparation step.  In the Connectivity \u0026amp; security section, save the endpoint information.   Return to the [Lightsail console] interface (https://lightsail.aws.amazon.com/ls/webapp/home/).\n  Connect to the public IP address of the Lightsail instance to access the todo app.\n  Click Settings, then update DB Hostname with RDS endpoint, click Save Settings. Carefully check the endpoint information when you copy and paste it into the DB Hostname field, avoiding extra spaces at the end.\n\r  We will see that the Task list will not have the tasks we created, because we are using the new Amazon RDS database.\n  Do the same for both Lightsail instances. Then we create tasks on each Lightsail instance. As a result we will see that the task is fully visible on the todo application no matter which instance we are connecting directly to.  So we have configured the firewall (security group) of the RDS instance to accept connections from the Lightsail subnet. Next we will configure our application to connect to the Amazon RDS endpoint.\nDuring the update of DB Hostname configuration for todo application, you may get below error. Since each time it connects to the DB, the todo application tries to create the tasks table. You can ignore this error and perform Refresh (press F5 key) to continue connecting the application to the RDS Instance. \\\nSaving settings and testing connection\rConnecting to the database.\rThere was an error connecting to the database server:\rCREATE DATABASE IF NOT EXISTS tasks; use tasks; CREATE TABLE tasks ( id INT(11) UNSIGNED AUTO_INCREMENT PRIMARY KEY, summary VARCHAR(30) NOT NULL, details VARCHAR(250) NOT NULL, priority VARCHAR(20) NOT NULL, dueDate TIMESTAMP, isComplete VARCHAR(10) );\rSQLSTATE[42S01]: Base table or view already exists: 1050 Table \u0026#39;tasks\u0026#39; already exists \r"
},
{
	"uri": "/6-migrate-ec2/6.3-update-sg/",
	"title": "Update Security group",
	"tags": [],
	"description": "",
	"content": "Update the Amazon Relational Database Service Security group. In this step, we will update the Amazon Relational Database Service side firewall configuration to accept incoming connections from EC2 instances.\n Return to the RDS console interface. (We still use Region Singapore throughout in the lab, if you use another Region, you will have to change the Region to suit). Under Resources, click DB Instances.   Click on the name database-1 RDS instance that we created in the preparation step.   Under Connectivity \u0026amp; security, click on default security group.   Click Inbound Rules, then click Edit inbound rules.\n  Click Add rule to proceed with adding a new rule for the security group.\n   From the type drop down, select MySQL/Aurora. In the source box, enter name of the security group for EC2 you saved. Click Save rules  So we have configured the firewall (security group) of the RDS instance to accept connections from the EC2 instance.\n"
},
{
	"uri": "/6-migrate-ec2/6.4-app-ec2/",
	"title": "App Test",
	"tags": [],
	"description": "",
	"content": "Application Testing on EC2   Return to the application page on the EC2 that is failing.\n  Refresh the page (F5) to check the connection.\n  Congratulations on completing the lab, through this lab you have grasped the basic features of Lightsail. Lightsail is well-suited for small and light workloads, but Lightsail also provides connectivity to AWS\u0026rsquo;s ecosystem of services to ensure that advanced resources like RDS and EC2 are available for open demand. your expansion in the future.  To avoid being charged, please perform the resource cleanup step.\n\r"
},
{
	"uri": "/1-deploy-lab-infra/1.4-amazon-rds/",
	"title": "Create RDS Instance",
	"tags": [],
	"description": "",
	"content": "In this step, we will proceed to create an Amazon Relational Database Service (RDS) database. Amazon RDS is a database service that offers more advanced features than Lightsail databases (various database engines, larger instance sizes, read replicas\u0026hellip;). As application requirements change, we may need to migrate the Lightsail database to Amazon RDS. In this workshop, we will also perform the migration of an existing Lightsail database to Amazon RDS.\n Go to Amazon RDS page, then click Create database. The above link will redirect to the Amazon RDS page in Region Singapore. If you use another Region, please select the correct Region again.\n\r  Click Standard Create, then select MySQL.  Scroll down, and select the MySQL version that matches the version of the previous Lightsail database. (5.7.34) Click Free tier to run RDS with basic configuration for free.  Scroll down to Credential settings and enter dbmasteruser in Master username. Then enter the password and confirm the password is the same as the password of the Lightsail database. ( asg123456)  Scroll down to Connectivity, make sure Default VPC is selected. If we deleted the Default VPC, it will need to be recreated.  Scroll to the bottom and click Create database.  It will take a few minutes to complete the creation of the RDS instance. You can continue with the next steps of the lab.  "
},
{
	"uri": "/4-lightsaillb/",
	"title": "Scale Application",
	"tags": [],
	"description": "",
	"content": "Scaling PHP Web Application Delivery Now that we have separated the user interface and the database, let\u0026rsquo;s see how we can increase the scalability and fault tolerance of our web application.\nIn this section, you will take an application server snapshot and deploy two new Lightsail instances from the snapshot. You will then perform attaching 3 Lightsail instances to the Lightsail load balancer you created.\nWhen that\u0026rsquo;s done, you\u0026rsquo;ll have a scaled-down, fault-tolerant version of your two-tier web application.\nOur architecture when adding Lightsail instance and using additional Lightsail load balancer is as follows:\nContent  Execute Snapshot Create more Lightsail instance Attaching Lightsail instance to load balancer  "
},
{
	"uri": "/5-rdsdb/",
	"title": "Use RDS",
	"tags": [],
	"description": "",
	"content": "Using Amazon Relational Database Service in conjunction with Lightsail There may be times when you find that one of Lightsail\u0026rsquo;s services isn\u0026rsquo;t right for your needs and you\u0026rsquo;ll want to use another AWS service instead.\nIn this lab, you will replace the Lightsail database with the RDS database. You will need to enable VPC Peering in Lightsail, add the Lightsail subnet to the RDS Security group, and then update the application to use the RDS database.\nOur architecture using Amazon Relational Database Service instead of Lightsail Database is as follows:\nContent  Enable VPC Peering Security Group Configuration Update Database Configuration  "
},
{
	"uri": "/6-migrate-ec2/",
	"title": "Export to EC2",
	"tags": [],
	"description": "",
	"content": "Export to EC2 As your application scale and management requirements grow, we move Lightsail instances to Amazon Elastic Compute Cloud (EC2). We will create a Lightsail snapshot then export to the EC2 service. Next we will create an EC2 Instance (a virtual machine similar to a Lightsail instance).\nContent  Export Lightsail Snapshot Create EC2 Instance Update Security group Test the application on EC2  "
},
{
	"uri": "/7-clean-up/",
	"title": "Clean up resources",
	"tags": [],
	"description": "",
	"content": "Currently we are using resources according to the following architecture\nIn addition, we have also created 1 more EC2 instances.\nWe will proceed to delete the resources in the following order\n Go to EC2 Service Interface.   Click Instances. Click on Instance EC2. Click Instance state. Click Terminate instance. Click Terminate.  Go to RDS Service Interface   Click on Database Click on the RDS DB we created. Click Actions. Click Delete.   Uncheck Create final snapshot? Click I acknowledge that upon instance deletion, automated backups, including system snapshots and point-in-time recovery, will no longer be available. Enter delete me to confirm. Click Delete.  Go to Lightsail\u0026rsquo;s admin interface click Create Instance.   Click on the 3-dot icon of the PHP-FE-1 instance. Click Delete. Click Yes, delete. Do the same for the PHP-FE-2 and PHP-FE-3 instances.  Click the Snapshots tab.   Click Delete multiple. Select both snapshots. Click Delete. Click Yes.  Click the Databases tab.   Click on the 3-dot icon of the Todo-DB instance. Click Delete. Click Yes, delete. Click Yes   Click the Networking tab.   Click on the 3-dot icon of the Todo-LB instance.  Click Delete. Click Yes, delete.    "
},
{
	"uri": "/categories/",
	"title": "Categories",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "/tags/",
	"title": "Tags",
	"tags": [],
	"description": "",
	"content": ""
}]